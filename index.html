<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AR卒業看板</title>

<style>
body{
  margin:0;
  overflow:hidden;
  font-family:sans-serif;
}

/* カメラ映像 */
#camera{
  position:fixed;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:1;
}

/* AR看板 */
#ar{
  position:fixed;
  bottom:18%;
  left:50%;
  transform:translateX(-50%);
  width:320px;
  z-index:2;
}

/* 撮影ボタン */
#shutter{
  position:fixed;
  bottom:40px;
  left:50%;
  transform:translateX(-50%);
  width:80px;
  height:80px;
  border-radius:50%;
  background:white;
  border:6px solid #ccc;
  z-index:3;
}
</style>
</head>

<body>

<video id="camera" autoplay playsinline></video>

<!-- ★ここを自分の画像名に変更 -->
<img src="ar_sign.png" id="ar">

<button id="shutter" onclick="takePhoto()"></button>

<canvas id="canvas" style="display:none;"></canvas>

<script>

/* カメラ起動 */
navigator.mediaDevices.getUserMedia({
  video:{ facingMode:"environment" },
  audio:false
})
.then(stream=>{
  document.getElementById("camera").srcObject=stream;
})
.catch(()=>{
  alert("カメラを許可してください（Safari推奨）");
});

/* 撮影 */
function takePhoto(){

  const video=document.getElementById("camera");
  const canvas=document.getElementById("canvas");
  const ctx=canvas.getContext("2d");

  canvas.width=video.videoWidth;
  canvas.height=video.videoHeight;

  ctx.drawImage(video,0,0);

  const link=document.createElement("a");
  link.download="graduation_AR.png";
  link.href=canvas.toDataURL("image/png");
  link.click();
}

</script>

</body>
</html>
